(this["webpackJsonpsmall-weather-app"]=this["webpackJsonpsmall-weather-app"]||[]).push([[0],Array(19).concat([function(e,t,a){e.exports=a.p+"static/media/ash.a3e50ba0.svg"},function(e,t,a){e.exports=a.p+"static/media/clear-day.51456abb.svg"},function(e,t,a){e.exports=a.p+"static/media/clear-night.6c056b1e.svg"},function(e,t,a){e.exports=a.p+"static/media/clouds.a406d4cc.svg"},function(e,t,a){e.exports=a.p+"static/media/cloudy.bf903809.svg"},function(e,t,a){e.exports=a.p+"static/media/humidity.bdc37673.svg"},function(e,t,a){e.exports=a.p+"static/media/mist.54db94da.svg"},function(e,t,a){e.exports=a.p+"static/media/pressure.f3cd1f75.svg"},function(e,t,a){e.exports=a.p+"static/media/rain.b589da9e.svg"},function(e,t,a){e.exports=a.p+"static/media/sand.696d5fbd.svg"},function(e,t,a){e.exports=a.p+"static/media/sunrise.c0fbb328.svg"},function(e,t,a){e.exports=a.p+"static/media/sunset.fe40a936.svg"},function(e,t,a){e.exports=a.p+"static/media/snow.9a8b79ae.svg"},function(e,t,a){e.exports=a.p+"static/media/thunderstorm.2d467c0c.svg"},function(e,t,a){e.exports=a.p+"static/media/tornado.7ce771c7.svg"},function(e,t,a){e.exports=a.p+"static/media/wind.783796b4.svg"},function(e,t,a){e.exports=a.p+"static/media/alert.c5038101.svg"},function(e,t,a){e.exports=a.p+"static/media/info.11cd1576.svg"},function(e,t,a){e.exports=a.p+"static/media/logo512.da3104aa.png"},function(e,t,a){e.exports=a.p+"static/media/co2.03c1a884.svg"},,,function(e,t,a){e.exports=a(68)},,,,,function(e,t,a){},,function(e,t,a){},function(e,t,a){},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(15),i=a.n(c),s=(a(46),a(3)),o=a(5),l=a.n(o),u=a(8),m=a(16),h=a(17),d=a(39),p=a(40),f=a(6),g=a(1),v=(a(48),function(e){var t=e.children;return r.a.createElement("section",{className:"container"},t)}),_=(a(49),function(){var e=Object(g.e)();return r.a.createElement("button",{className:"home-button",onClick:function(){e.push("/")}},r.a.createElement("i",{className:"fas fa-arrow-left"})," Home")}),E=function(){return r.a.createElement("div",null,"Loading...")},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Warsaw",t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n="https://weather-app-dyrpit.herokuapp.com/weather?location=".concat(e);return t&&a&&(n="https://weather-app-dyrpit.herokuapp.com/weather?lat=".concat(t,"&lng=").concat(a)),fetch(n).then((function(e){if(!e.ok)throw new Error(e.status);return e})).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){if("400"===e.message)throw new Error("City not found");throw new Error(e.message)}))},y=function(e,t,a){var n="https://weather-app-dyrpit.herokuapp.com/weather/alerts?lat=".concat(e,"&lng=").concat(t);return fetch(n,a).then((function(e){if(!e.ok)throw new Error(e.status);return e})).then((function(e){return e.json()})).then((function(e){var t=e.alerts;return t?t[0]:null})).catch((function(e){if("400"===e.message)throw new Error("No alerts for this city");throw new Error(e.message)}))},N=function(e,t){var a="https://weather-app-dyrpit.herokuapp.com/weather/hourly?lat=".concat(e,"&lng=").concat(t);return fetch(a).then((function(e){if(!e.ok)throw new Error(e.status);return e})).then((function(e){return e.json()})).then((function(e){var t=e.hourly;return t||null})).catch((function(e){if("400"===e.message)throw new Error("No hourly weather for this city");throw new Error(e.message)}))},b=(a(55),function(e){var t=e.lat,a=e.lng,c=Object(n.useState)(""),i=Object(s.a)(c,2),o=i[0],m=i[1],h=Object(n.useState)(!1),d=Object(s.a)(h,2),p=d[0],f=d[1],g=Object(n.useState)(null),w=Object(s.a)(g,2),N=w[0],b=w[1];return Object(n.useEffect)((function(){var e=new AbortController;return function(){var t=Object(u.a)(l.a.mark((function t(a,n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f(!0),t.prev=1,t.next=4,y(a,n,{signal:e.signal});case 4:if(r=t.sent,f(!1),r&&r.description){t.next=9;break}return m("No weather alerts"),t.abrupt("return");case 9:m(r.description),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(1),b(t.t0.message),f(!1);case 16:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e,a){return t.apply(this,arguments)}}()(t,a),function(){e.abort()}}),[t,a]),r.a.createElement(v,null,r.a.createElement(_,null),r.a.createElement("div",{className:"alerts-section"},p?r.a.createElement(E,null):r.a.createElement("p",{className:"alerts-section__description"},N||o)))}),x=function(e){return new Date(1e3*e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},C=a(19),k=a.n(C),S=a(20),O=a.n(S),j=a(21),W=a.n(j),F=a(22),L=a.n(F),D=a(23),I=a.n(D),q=a(24),M=a.n(q),T=a(25),J=a.n(T),A=a(26),B=a.n(A),P=a(27),z=a.n(P),R=a(28),G=a.n(R),V=a(29),H=a.n(V),U=a(30),K=a.n(U),Q=a(31),X=a.n(Q),Y=a(32),Z=a.n(Y),$=a(33),ee=a.n($),te=a(34),ae=a.n(te),ne=function(e,t){if(!e||!t)return!0;var a=1e3*e,n=1e3*t,r=Date.now();return r<n&&r>a},re={ash:k.a,clearDay:O.a,clearNight:W.a,clouds:L.a,cloudy:I.a,humidity:M.a,mist:J.a,pressure:B.a,rain:z.a,sand:G.a,snow:X.a,sunrise:H.a,sunset:K.a,thunderstorm:Z.a,tornado:ee.a,wind:ae.a},ce=function(e,t,a){return e.includes("clear")?ne(t,a)?re.clearDay:re.clearNight:re[e]},ie=(a(56),function(e){var t=e.value,a=e.title,n=ce(a),c=t,i="";return"wind"===a?i=" km/h":"humidity"===a||"cloudy"===a?i="%":"sunrise"===a||"sunset"===a?c=x(t):"pressure"===a&&(i=" hPa"),r.a.createElement("section",{className:"details-section"},r.a.createElement("div",{className:"details-section__item"},r.a.createElement("img",{className:"details-section__img",src:n,alt:a}),r.a.createElement("span",{className:"details-section__title"},a),r.a.createElement("p",{className:"details-section__value"},c,i)))}),se=(a(57),function(e){var t=Object.entries(e);return r.a.createElement(v,null,r.a.createElement(_,null),t.map((function(e){var t=Object(s.a)(e,2),a=t[0],n=t[1];return r.a.createElement(ie,{key:a,value:n,title:a})})))}),oe=(a(58),function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("div",{className:"footer__copyright"},r.a.createElement("p",{className:"footer__made-by"},"Piotr Dyrda \xa9")),r.a.createElement("div",{className:"footer__credits"},"Icons made by"," ",r.a.createElement("a",{className:"footer__link",href:"https://www.flaticon.com/authors/vitaly-gorbachev",title:"Vitaly Gorbachev"},"Vitaly Gorbachev")," ","and"," ",r.a.createElement("a",{className:"footer__link",href:"https://www.freepik.com",title:"Freepik"},"Freepik")," ","from"," ",r.a.createElement("a",{className:"footer__link",href:"https://www.flaticon.com/",title:"Flaticon"},"www.flaticon.com")))}),le=(a(59),function(e){var t=e.city,a=e.err,n=e.isLoading,c=e.handleFavouriteCitiesChange,i=e.lat,s=e.lng,o=(new Date).toLocaleDateString(void 0,{weekday:"short"}),l=(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"header__container"},n?r.a.createElement(E,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"header__container header__container--row"},r.a.createElement("p",{className:"header__city-name"},a||t),Boolean(a)||r.a.createElement("div",{onClick:function(){console.log(t,s,i);var e={city:t,lng:s,lat:i},a=localStorage.getItem("cities");if(!a){var n=JSON.stringify(Array.of(e));return localStorage.setItem("cities",n),void c(n)}var r=JSON.parse(a);r.push(e),localStorage.setItem("cities",JSON.stringify(r)),c(r)},className:"header__add-button"},r.a.createElement("i",{className:"fas fa-plus add-button__icon"}))),r.a.createElement("p",{className:"header__date"},o,", ",l))))}),ue=a(35),me=a.n(ue),he=a(36),de=a.n(he),pe=a(37),fe=a.n(pe),ge=a(38),ve=a.n(ge),_e=(a(60),function(e){var t=e.properCondition;return r.a.createElement("nav",{className:"menu ".concat(t)},r.a.createElement("ul",{className:"menu__list"},r.a.createElement("li",{className:"menu__item"},r.a.createElement(f.b,{className:"menu__link",to:"/pollution"},r.a.createElement("img",{className:"menu__image",src:ve.a,alt:"pollution menu icon"}),r.a.createElement("p",{className:"menu__name"},"Air Pollution"))),r.a.createElement("li",{className:"menu__item"},r.a.createElement(f.b,{className:"menu__link",to:"/details"},r.a.createElement("img",{className:"menu__image",src:de.a,alt:"details menu icon"}),r.a.createElement("p",{className:"menu__name"},"Details"))),r.a.createElement("li",{className:"menu__item"},r.a.createElement(f.b,{className:"menu__link",to:"/alerts"},r.a.createElement("img",{className:"menu__image",src:me.a,alt:"alert menu icon"}),r.a.createElement("p",{className:"menu__name"},"Alerts")))),r.a.createElement("div",{className:"menu__logo"},r.a.createElement("img",{className:"logo__image",src:fe.a,alt:"logo"}),r.a.createElement("span",{className:"logo__title"},"Small weather app")))}),Ee=function(){return r.a.createElement(v,null,r.a.createElement("p",{style:{alignSelf:"center"}},"Under construction"))},we=(a(61),function(e){var t=e.handleInputChange,a=e.value,n=e.handleSubmit;return r.a.createElement("form",{className:"search"},r.a.createElement("input",{className:"search__input",type:"text",placeholder:"Type city",value:a,onChange:t}),r.a.createElement("button",{className:"search__btn",onClick:n},r.a.createElement("i",{className:"fas fa-search"})))}),ye=(a(62),function(e){var t=e.toggleMenu;return r.a.createElement("div",{onClick:t,className:"side-menu-button"},r.a.createElement("i",{className:"fas fa-ellipsis-v side-menu-button__icon"}))}),Ne=(a(63),function(e){var t=e.favouriteCities,a=e.getWeather,c=e.handleFavouriteCitiesChange,i=Object(n.useState)(!1),o=Object(s.a)(i,2),l=o[0],u=o[1],m=function(){u((function(e){return!e}))},h=l?"side-menu--is-open":"",d=l?"side-menu__panel--is-open":"";return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"side-menu"},r.a.createElement("div",{onClick:m,className:"side-menu__background ".concat(h)}),r.a.createElement("div",{className:"side-menu__panel ".concat(d)},r.a.createElement("div",{className:"settings"},r.a.createElement("i",{className:"fas fa-cog settings__icon"})),r.a.createElement("h3",{className:"panel__title"},"Favourite locations"),r.a.createElement("ul",{className:"panel__city-list"},t&&t.map((function(e,t){var n=e.city,i=e.lat,s=e.lng;return r.a.createElement("div",{key:n+t},r.a.createElement("p",{onClick:function(){return a(n,i,s)}},n),r.a.createElement("p",{onClick:function(){return function(e){var t=JSON.parse(localStorage.getItem("cities"));console.log(e),t=t.filter((function(t,a){return a!==e})),localStorage.setItem("cities",JSON.stringify(t)),c(t)}(t)}},r.a.createElement("i",{className:"far fa-trash-alt"})))}))))),r.a.createElement(ye,{toggleMenu:m}))}),be=(a(64),function(e){var t=e.itemWeather,a=t.dt,n=t.temp,c=Object(s.a)(t.weather,1)[0].main,i=ce(c.toLowerCase()),o=x(a);return r.a.createElement("div",{className:"weather-item"},r.a.createElement("p",{className:"weather-item__text"},o),r.a.createElement("img",{className:"weather-item__img",src:i,alt:c}),r.a.createElement("p",{className:"weather-item__text"},n.toFixed(),"\xb0"))}),xe=(a(65),function(e){var t=e.hourlyWeather;return r.a.createElement("div",{className:"hourly-weather-section"},r.a.createElement("button",{className:"hourly-weather-section__button hourly-weather-section__button--left",onClick:function(){var e=document.querySelector(".hourly-weather-section"),t=document.querySelector(".hourly-weather-section__container"),a=document.querySelector(".weather-item"),n=document.querySelector(".hourly-weather-section__button--left"),r=document.querySelector(".hourly-weather-section__button--right"),c=t.offsetLeft,i=a.clientWidth,s=-(t.offsetWidth-e.getBoundingClientRect().width);if(c+i>=0)return n.style.display="none",void(t.style.left="0px");c+i>s&&(r.style.display="block"),t.style.left="".concat(c+i,"px")}},r.a.createElement("i",{className:"fas fa-angle-left"})),r.a.createElement("div",{className:"hourly-weather-section__container"},t&&t.map((function(e,t){return r.a.createElement(be,{key:t,itemWeather:e})}))),r.a.createElement("button",{className:"hourly-weather-section__button hourly-weather-section__button--right",onClick:function(){var e=document.querySelector(".hourly-weather-section"),t=document.querySelector(".hourly-weather-section__container"),a=document.querySelector(".weather-item"),n=document.querySelector(".hourly-weather-section__button--left"),r=document.querySelector(".hourly-weather-section__button--right"),c=t.offsetLeft,i=e.getBoundingClientRect().width+-1*t.offsetLeft,s=t.offsetWidth,o=a.clientWidth,l=-(t.offsetWidth-e.getBoundingClientRect().width);if(c-o<0&&(n.style.display="block"),i+o>=s)return r.style.display="none",void(t.style.left="".concat(l,"px"));t.style.left="".concat(c-o,"px")}},r.a.createElement("i",{className:"fas fa-angle-right"})))}),Ce=(a(66),function(e){var t=e.conditions,a=e.max,n=e.min,c=e.temp,i=e.sunrise,s=e.sunset,o=e.weather,l=e.hourlyWeather,u=ce(t,i,s);return r.a.createElement(v,null,r.a.createElement("div",{className:"weather-section"},r.a.createElement("img",{className:"weather-section__img",src:u,alt:t}),r.a.createElement("p",{className:"weather-section__text"},o)),r.a.createElement("div",{className:"weather-section weather-section--grow"},r.a.createElement("div",{className:"weather-section__container"},r.a.createElement("p",{className:"weather-section__main-temp"},c,"\xb0")),r.a.createElement("div",{className:"weather-section__container"},r.a.createElement("p",{className:"weather-section__aside-temp"},r.a.createElement("span",null,"Max: "),a,"\xb0 C"),r.a.createElement("p",{className:"weather-section__aside-temp weather-section__aside-temp--border-top"},r.a.createElement("span",null,"Min: "),n,"\xb0 C"))),r.a.createElement(xe,{hourlyWeather:l}))}),ke=["mist","smoke","haze","fog","squall"],Se=["sand","dust"],Oe=["rain","drizzle"],je=(a(67),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={value:"",temp:"",humidity:"",maxTemp:"",minTemp:"",pressure:"",wind:"",conditions:"",conditionsDescription:"",city:"",cloudy:"",sunrise:"",sunset:"",err:!1,errMessage:"",lat:"",lng:"",isLoading:!1,hourlyWeather:null,favouriteCities:null},e.handleInputChange=function(t){var a=t.target.value;e.setState({value:a})},e.handleFavouriteCitiesChange=function(t){e.setState({favouriteCities:t})},e.handleSubmit=function(){var t=Object(u.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),e.getWeather(e.state.value);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getWeather=function(){var t=Object(u.a)(l.a.mark((function t(a,n,r){var c,i,o,u,m,h,d,p,f,g,v,_,E,y,b,x,C,k,S,O,j;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),t.prev=1,t.next=4,w(a,n,r);case 4:if(!(c=t.sent)){t.next=13;break}return i=c.clouds.all,o=c.coord,u=o.lon,m=o.lat,h=c.main,d=h.temp,p=h.temp_max,f=h.temp_min,g=h.humidity,v=h.pressure,_=c.name,E=c.sys,y=E.sunrise,b=E.sunset,x=c.wind.speed,C=Object(s.a)(c.weather,1),k=C[0],S=k.main,O=k.description,e.setState({temp:Number(d.toFixed()),maxTemp:Number(p.toFixed()),minTemp:Number(f.toFixed()),city:_,humidity:g,pressure:v,wind:Number(x.toFixed()),conditions:S.toLowerCase(),conditionsDescription:O,cloudy:i,sunrise:y,sunset:b,lng:u,lat:m,err:!1,errMessage:"",width:null,hourlyWeather:null}),t.next=10,N(c.coord.lat,c.coord.lon);case 10:j=t.sent,e.setState({isLoading:!1}),j&&e.setState({hourlyWeather:j});case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(1),e.setState({err:!0,errMessage:t.t0.message,isLoading:!1});case 18:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e,a,n){return t.apply(this,arguments)}}(),e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;navigator.geolocation.getCurrentPosition((function(t){e.getWeather(void 0,t.coords.latitude,t.coords.longitude)}));var t=JSON.parse(localStorage.getItem("cities"));t&&this.handleFavouriteCitiesChange(t)}},{key:"render",value:function(){var e=this.state,t=e.city,a=e.conditions,n=e.cloudy,c=e.errMessage,i=e.humidity,s=e.lat,o=e.lng,l=e.maxTemp,u=e.minTemp,m=e.pressure,h=e.sunrise,d=e.sunset,p=e.temp,v=e.value,_=e.wind,E=e.isLoading,w=e.hourlyWeather,y=e.favouriteCities;console.log(y);var N=function(e,t,a){return ke.includes(e)?"mist":Se.includes(e)?"sand":Oe.includes(e)?"rain":"clear"===e?ne(t,a)?"clearDay":"clearNight":e}(a,h,d);return r.a.createElement(f.a,null,r.a.createElement("div",{className:"background-container"},r.a.createElement(Ne,{favouriteCities:y,getWeather:this.getWeather,handleFavouriteCitiesChange:this.handleFavouriteCitiesChange}),r.a.createElement("div",{className:"backdrop"},r.a.createElement("div",{className:"app-container ".concat(N)},r.a.createElement(le,{city:t,err:c,isLoading:E,lat:s,lng:o,handleFavouriteCitiesChange:this.handleFavouriteCitiesChange}),r.a.createElement(we,{handleInputChange:this.handleInputChange,handleSubmit:this.handleSubmit,value:v}),r.a.createElement(g.a,{exact:!0,path:"/",component:function(){return r.a.createElement(Ce,{conditions:N,weather:a,temp:p,max:l,min:u,sunrise:h,sunset:d,hourlyWeather:w})}}),r.a.createElement(g.a,{path:"/details",component:function(){return r.a.createElement(se,{cloudy:n,humidity:i,pressure:m,sunrise:h,sunset:d,wind:_})}}),r.a.createElement(g.a,{path:"/alerts",component:function(){return r.a.createElement(b,{lat:s,lng:o})}}),r.a.createElement(g.a,{path:"/pollution",component:function(){return r.a.createElement(Ee,null)}}),r.a.createElement(_e,{properCondition:N}),r.a.createElement(oe,null)))))}}]),a}(n.Component));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(je,null)),document.getElementById("root"))}]),[[41,1,2]]]);
//# sourceMappingURL=main.372046e1.chunk.js.map